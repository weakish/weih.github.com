---
layout:       post
title:        "山口山英雄榜记录器"
description: 
banner: 
categories: 
- development
- rails
- code
---

想写这个东西有段时间了，虽然很久没玩游戏，不过老惦记着。一直觉得山口山官方没有提供一种很好的方法让玩家可以把角色的成长历程记录下来，玩家无法找回过去某个时刻自己角色的状态，所以我想做个能记录下英雄榜变化的App。

思路很简单：

1. 用户登记自己的角色（别人的也可以），服务器将该角色的信息写入DB
2. 服务器定时（目前定为每天）从英雄榜获取静态页面（不将页面存入db，迟早要cache，cache出来还是静态页面，直接存文件比较合适），对html中的一写内容进行替换（如静态资源的路径），去除英雄榜无关的内容
3. 用户随时可以查看从登记开始时之后角色每一天的英雄榜

技术上还好实现，两三天就做好了，不过涉及几个问题：

1. 由于fetch的时静态页面，所以vps的空间是个问题，一个英雄榜静态页面是100kb左右，如果用户很多，vps的硬盘会比较吃紧，不过硬盘总是廉价的，所以应该不是大问题，而且用户很多这种事情不是那么容易发生的

2. 关于许可，官方明确是说了不允许使用英雄榜的数据，不过我想小规模的小打小闹，纯粹为了方便自己和他人，应该问题也不是很大。

想了很久之所以没有用Blizzard的API是因为英雄榜的数据十分完整，有一些是API都没提供的（当然API也有英雄榜没有的数据，例如近期完成的任务），并且也很符合我的要求。还有就是API每天的request次数是有限制的，非认证App每天是10000次，说不定不够用

大概就这样，功能基本做好了，还是卡在UI这里，弄好看真麻烦。